# VecBoost

<p align="left">
    <img src="https://img.shields.io/badge/Rust-2024-edded?logo=rust&style=flat-square" alt="Rust Edition">
    <img src="https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square" alt="MIT License">
    <img src="https://img.shields.io/badge/Version-0.1.0-green.svg?style=flat-square" alt="Version">
</p>

é«˜æ€§èƒ½ã€ç”Ÿäº§çº§åµŒå…¥å‘é‡æœåŠ¡ï¼Œä½¿ç”¨ Rust ç¼–å†™ã€‚VecBoost æä¾›é«˜æ•ˆçš„æ–‡æœ¬å‘é‡åŒ–æœåŠ¡ï¼Œæ”¯æŒå¤šç§æ¨ç†å¼•æ“ã€GPU åŠ é€Ÿå’Œä¼ä¸šçº§åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸš€ é«˜æ€§èƒ½**: ä¼˜åŒ–çš„ Rust ä»£ç åº“ï¼Œæ”¯æŒæ‰¹å¤„ç†å’Œå¹¶å‘è¯·æ±‚
- **ğŸ”§ å¤šå¼•æ“æ”¯æŒ**: Candleï¼ˆåŸç”Ÿ Rustï¼‰å’Œ ONNX Runtime æ¨ç†å¼•æ“
- **ğŸ® GPU åŠ é€Ÿ**: NVIDIA CUDA å’Œ Apple Metal åŸç”Ÿæ”¯æŒ
- **ğŸ“Š æ™ºèƒ½ç¼“å­˜**: å¤šå±‚ç¼“å­˜ç­–ç•¥ï¼ˆLRUã€LFUã€KVï¼‰
- **ğŸ” ä¼ä¸šçº§å®‰å…¨**: JWT è®¤è¯ã€CSRF ä¿æŠ¤å’Œå®¡è®¡æ—¥å¿—
- **âš¡ é€Ÿç‡é™åˆ¶**: å¯é…ç½®çš„ä»¤ç‰Œæ¡¶ç®—æ³•é€Ÿç‡é™åˆ¶
- **ğŸ“ˆ ä¼˜å…ˆçº§é˜Ÿåˆ—**: å¯é…ç½®ä¼˜å…ˆçº§çš„è¯·æ±‚é˜Ÿåˆ—
- **ğŸŒ åŒ API æ¥å£**: gRPC å’Œ HTTP/REST æ¥å£ï¼Œæ”¯æŒ OpenAPI
- **ğŸ“¦ Kubernetes éƒ¨ç½²**: åŒ…å«ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Rust 1.75+ï¼ˆ2024 ç‰ˆï¼‰
- CUDA Toolkit 12.xï¼ˆLinux GPU æ”¯æŒï¼‰
- Metalï¼ˆmacOS GPU æ”¯æŒï¼‰

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Kirky-X/vecboost.git
cd vecboost

# é»˜è®¤æ„å»ºï¼ˆä»… CPUï¼‰
cargo build --release

# æ„å»º CUDA æ”¯æŒï¼ˆLinuxï¼‰
cargo build --release --features cuda

# æ„å»º Metal æ”¯æŒï¼ˆmacOSï¼‰
cargo build --release --features metal

# æ„å»ºå…¨éƒ¨åŠŸèƒ½
cargo build --release --features cuda,onnx,grpc,auth,redis
```

### é…ç½®

å¤åˆ¶ç¤ºä¾‹é…ç½®å¹¶è‡ªå®šä¹‰ï¼š

```bash
cp config.toml config_custom.toml
# ç¼–è¾‘ config_custom.toml
```

### è¿è¡Œ

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ
./target/release/vecboost

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
./target/release/vecboost --config config_custom.toml
```

æœåŠ¡é»˜è®¤åœ¨ `http://localhost:9002` å¯åŠ¨ã€‚

### Docker

```bash
# æ„å»ºé•œåƒ
docker build -t vecboost:latest .

# è¿è¡Œå®¹å™¨
docker run -p 9002:9002 -v $(pwd)/config.toml:/app/config.toml vecboost:latest
```

## ğŸ“– æ–‡æ¡£

- [ğŸ“‹ ç”¨æˆ·æŒ‡å—](USER_GUIDE.md) - è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [ğŸ”Œ API å‚è€ƒ](API_REFERENCE.md) - REST API å’Œ gRPC æ–‡æ¡£
- [ğŸ—ï¸ æ¶æ„è®¾è®¡](ARCHITECTURE.md) - ç³»ç»Ÿè®¾è®¡å’Œç»„ä»¶è¯´æ˜
- [ğŸ¤ è´¡çŒ®æŒ‡å—](docs/CONTRIBUTING.md) - è´¡çŒ®ä»£ç æŒ‡å—

## ğŸ”Œ API ä½¿ç”¨

### HTTP REST API

é€šè¿‡ HTTP ç”ŸæˆåµŒå…¥å‘é‡ï¼š

```bash
curl -X POST http://localhost:9002/api/v1/embed \
  -H "Content-Type: application/json" \
  -d '{"text": "Hello, world!"}'
```

å“åº”ï¼š

```json
{
  "embedding": [0.123, 0.456, ...],
  "dimension": 1024,
  "processing_time_ms": 15.5
}
```

### gRPC API

æœåŠ¡åœ¨ 50051 ç«¯å£ï¼ˆå¯é…ç½®ï¼‰æš´éœ² gRPC æ¥å£ï¼š

```protobuf
service EmbeddingService {
  rpc Embed(EmbedRequest) returns (EmbedResponse);
  rpc EmbedBatch(BatchEmbedRequest) returns (BatchEmbedResponse);
  rpc ComputeSimilarity(SimilarityRequest) returns (SimilarityResponse);
}
```

### OpenAPI æ–‡æ¡£

è®¿é—®äº¤äº’å¼ API æ–‡æ¡£ï¼š
- Swagger UI: `http://localhost:9002/swagger-ui/`
- ReDoc: `http://localhost:9002/redoc/`

## âš™ï¸ é…ç½®

### ä¸»è¦é…ç½®é€‰é¡¹

```toml
[server]
host = "0.0.0.0"
port = 9002

[model]
model_repo = "BAAI/bge-m3"  # HuggingFace æ¨¡å‹ ID
use_gpu = true
batch_size = 32
expected_dimension = 1024

[embedding]
cache_enabled = true
cache_size = 1024

[auth]
enabled = true
jwt_secret = "your-secret-key"
```

æŸ¥çœ‹[é…ç½®æŒ‡å—](config.toml)äº†è§£å…¨éƒ¨é€‰é¡¹ã€‚

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VecBoost æœåŠ¡                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   HTTP/gRPC â”‚  â”‚  è®¤è¯å±‚     â”‚  â”‚  é€Ÿç‡é™åˆ¶           â”‚  â”‚
â”‚  â”‚   ç«¯ç‚¹      â”‚  â”‚  (JWT/CSRF) â”‚  â”‚  (ä»¤ç‰Œæ¡¶)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              è¯·æ±‚ç®¡é“                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ ä¼˜å…ˆçº§  â”‚  â”‚ è¯·æ±‚      â”‚  â”‚ å“åº”            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ é˜Ÿåˆ—    â”‚â†’ â”‚ å·¥ä½œçº¿ç¨‹  â”‚â†’ â”‚ é€šé“            â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              åµŒå…¥æœåŠ¡                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ æ–‡æœ¬    â”‚  â”‚ æ¨ç†      â”‚  â”‚ å‘é‡ç¼“å­˜        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ åˆ†å—   â”‚â†’ â”‚ å¼•æ“      â”‚â†’ â”‚ (LRU/LFU/KV)    â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              æ¨ç†å¼•æ“                                â”‚    â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚    â”‚
â”‚  â”‚    â”‚   Candle    â”‚  â”‚    ONNX     â”‚                 â”‚    â”‚
â”‚  â”‚    â”‚  (åŸç”Ÿ)     â”‚  â”‚  Runtime    â”‚                 â”‚    â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â–¼                â–¼                â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   CPU    â”‚    â”‚   CUDA   â”‚    â”‚  Metal   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
vecboost/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ audit/          # å®¡è®¡æ—¥å¿—
â”‚   â”œâ”€â”€ auth/           # è®¤è¯ (JWT, CSRF)
â”‚   â”œâ”€â”€ cache/          # å¤šå±‚ç¼“å­˜ (LRU, LFU, KV)
â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ device/         # è®¾å¤‡ç®¡ç† (CPU, CUDA, Metal)
â”‚   â”œâ”€â”€ engine/         # æ¨ç†å¼•æ“ (Candle, ONNX)
â”‚   â”œâ”€â”€ grpc/           # gRPC æœåŠ¡å™¨
â”‚   â”œâ”€â”€ metrics/        # Prometheus æŒ‡æ ‡
â”‚   â”œâ”€â”€ model/          # æ¨¡å‹ä¸‹è½½å’Œç®¡ç†
â”‚   â”œâ”€â”€ pipeline/       # è¯·æ±‚ç®¡é“å’Œä¼˜å…ˆçº§
â”‚   â”œâ”€â”€ rate_limit/     # é€Ÿç‡é™åˆ¶
â”‚   â”œâ”€â”€ routes/         # HTTP è·¯ç”±
â”‚   â”œâ”€â”€ security/       # å®‰å…¨å·¥å…·
â”‚   â”œâ”€â”€ service/        # æ ¸å¿ƒåµŒå…¥æœåŠ¡
â”‚   â””â”€â”€ text/           # æ–‡æœ¬å¤„ç†å’Œåˆ†è¯
â”œâ”€â”€ examples/gpu/       # GPU ç¤ºä¾‹ç¨‹åº
â”œâ”€â”€ proto/              # gRPC åè®®å®šä¹‰
â”œâ”€â”€ deployments/        # Kubernetes éƒ¨ç½²é…ç½®
â”œâ”€â”€ tests/              # é›†æˆæµ‹è¯•
â””â”€â”€ config.toml         # é»˜è®¤é…ç½®
```

## ğŸ¯ æ€§èƒ½

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| åµŒå…¥ç»´åº¦ | æœ€é«˜ 4096 |
| æ‰¹å¤„ç†å¤§å° | æœ€é«˜ 256 |
| è¯·æ±‚/ç§’ | 1000+ (CPU) |
| å»¶è¿Ÿ (p99) | < 50ms (GPU) |
| ç¼“å­˜å‘½ä¸­ç‡ | > 90% (1024 æ¡ç›®) |

## ğŸ”’ å®‰å…¨

- **è®¤è¯**: JWT ä»¤ç‰Œï¼Œæ”¯æŒå¯é…ç½®è¿‡æœŸæ—¶é—´
- **æˆæƒ**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰è¯·æ±‚çš„ç”¨æˆ·å’Œæ“ä½œè¯¦æƒ…
- **é€Ÿç‡é™åˆ¶**: æ¯ IPã€æ¯ç”¨æˆ·ã€å…¨å±€é™é€Ÿ
- **åŠ å¯†**: AES-256-GCM åŠ å¯†é™æ€æ•æ„Ÿæ•°æ®

## ğŸ“ˆ ç›‘æ§

- **Prometheus æŒ‡æ ‡**: `/metrics` ç«¯ç‚¹
- **å¥åº·æ£€æŸ¥**: `/health` ç«¯ç‚¹
- **OpenAPI æ–‡æ¡£**: `/swagger-ui/` çš„ Swagger UI
- **Grafana ä»ªè¡¨æ¿**: `deployments/` ä¸­çš„é¢„é…ç½®ä»ªè¡¨æ¿

## ğŸš€ éƒ¨ç½²

### Kubernetes

```bash
# éƒ¨ç½²åˆ° Kubernetes
kubectl apply -f deployments/kubernetes/
```

æŸ¥çœ‹[éƒ¨ç½²æŒ‡å—](deployments/kubernetes/README.md)äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

### Docker Compose

```yaml
services:
  vecboost:
    image: vecboost:latest
    ports:
      - "9002:9002"
    volumes:
      - ./config.toml:/app/config.toml
    environment:
      - MODEL_REPO=BAAI/bge-m3
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·é˜…è¯»[è´¡çŒ®æŒ‡å—](docs/CONTRIBUTING.md)äº†è§£æ›´å¤šã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£æ›´å¤šã€‚

## ğŸ™ è‡´è°¢

- [Candle](https://github.com/huggingface/candle) - åŸç”Ÿ Rust ML æ¡†æ¶
- [ONNX Runtime](https://onnxruntime.ai/) - è·¨å¹³å° ML æ¨ç†
- [Hugging Face Hub](https://huggingface.co/models) - æ¨¡å‹ä»“åº“
